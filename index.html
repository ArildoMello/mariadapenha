<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="https://arildomello.github.io/propriospublicos/assets/img/Ico.ico" />
  <title>GML 2025 — Lei Maria da Penha</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

  <!-- ==== CSS SIMPLIFICADO (clean + neon azul) ==== -->
  <style>
    :root{
      --bg1:#0a0f1f; --bg2:#0d1533; --card:#121a3a;
      --text:#eaf1ff; --muted:#a9b7e3;
      --a:#00e6ff; --b:#2f7bff; --c:#7c4dff;
      --brd:rgba(130,160,255,.22); --glass:rgba(18,25,61,.55);
      --shadow:0 20px 50px rgba(0,0,0,.35);
      --button-bg: linear-gradient(90deg, #00d1ff, #2f7bff);
    }
    *{box-sizing:border-box; margin:0; padding:0}
    body{
      font-family:'Inter',system-ui,Segoe UI,Arial,sans-serif;
      color:var(--text);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh; padding:20px;
    }
    .container{max-width:1200px; margin:0 auto}
    .header{
      text-align:center; margin-bottom:24px; padding:24px 16px;
      background:linear-gradient(180deg,var(--glass),rgba(10,12,30,.45));
      border:1px solid var(--brd); border-radius:20px; box-shadow:var(--shadow)
    }
    .header h1{
      font-size:clamp(1.8rem,1.2rem + 2vw,2.6rem); font-weight:900;
      background:linear-gradient(90deg,var(--a),var(--b),var(--c));
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom:6px;
    }
    .header p{color:var(--muted); font-weight:600}

    /* Cards KPI */
    .stats-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin:22px 0 30px}
    .stat-card{
      background: var(--button-bg);
      border:1px solid var(--brd); border-radius:16px; padding:20px; text-align:center;
      box-shadow:var(--shadow); color: #fff;
    }
    .stat-number{
      font-size:2.4rem; font-weight:900; line-height:1;
      color: #fff;
      margin-bottom:6px;
    }
    .stat-label{color:#fff; font-weight:700; font-size:.95rem}

    /* Charts */
    .charts-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:18px; margin-bottom:26px}
    .chart-container{
      background:linear-gradient(180deg,var(--card),rgba(14,18,48,.85));
      border:1px solid var(--brd); border-radius:18px; padding:18px; box-shadow:var(--shadow)
    }
    .chart-title{
      text-align:center; font-weight:800; margin-bottom:12px;
      background:linear-gradient(90deg,var(--a),var(--b)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      letter-spacing:.3px
    }
    .chart-canvas{max-height:300px; width:100%; height:auto !important}

    /* Lista TOP 5 */
    .crimes-list{
      background:linear-gradient(180deg,var(--card),rgba(14,18,48,.85));
      border:1px solid var(--brd); border-radius:18px; padding:22px; box-shadow:var(--shadow)
    }
    .crimes-title{
      text-align:center; font-weight:900; margin-bottom:16px;
      background:linear-gradient(90deg,var(--a),var(--b)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      letter-spacing:.4px
    }
    .crime-item{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:12px 14px; border-radius:12px; border:1px solid var(--brd);
      background:rgba(14,18,48,.6); margin-bottom:10px
    }
    .crime-name{color:var(--text); font-weight:600; font-size:.98rem}
    .crime-count{
      min-width:64px; text-align:center; font-weight:900;
      padding:8px 12px; border-radius:999px; color:#001223;
      background:linear-gradient(90deg,var(--a),var(--b))
    }

    .footer{ text-align:center; color:var(--muted); margin:26px 0 6px; font-weight:700 }

    /* Mobile */
    @media (max-width:768px){
      .chart-canvas{max-height:250px}
      .stats-grid{grid-template-columns:1fr}
      .charts-grid{grid-template-columns:1fr}
      .crime-name{font-size:.95rem}
    }
    @media (min-width:769px) and (max-width:1024px){
      .chart-canvas{max-height:280px}
      .stats-grid{grid-template-columns:repeat(2,1fr)}
      .charts-grid{grid-template-columns:repeat(2,1fr)}
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>Atendimentos em 2025</h1>
      <div class="subtitle">ANÁLISE 2025 – LEI MARIA DA PENHA</div>
    </div>

    <!-- KPIs -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" data-target="594">0</div> <!-- Total  -->
        <div class="stat-label">Total de Ocorrências</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" data-target="16">0</div>
        <div class="stat-label">Tipos de Crimes</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" data-target="167">0</div>  <!-- Presos -->
        <div class="stat-label">Maiores Detidos</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" data-target="1">0</div>
        <div class="stat-label">Menores Apreendidos</div>
      </div>
    </div>
    <!-- Charts -->
    <div class="charts-grid">
      <div class="chart-container">
        <h3 class="chart-title">Mapeamento Regional</h3>
        <canvas id="regiaoChart" class="chart-canvas"></canvas>
      </div>

      <div class="chart-container">
        <h3 class="chart-title">Análise Temporal</h3>
        <canvas id="periodoChart" class="chart-canvas"></canvas>
      </div>

      <div class="chart-container">
        <h3 class="chart-title">Padrão Semanal</h3>
        <canvas id="diaSemanaChart" class="chart-canvas"></canvas>
      </div>

      <div class="chart-container">
        <h3 class="chart-title">Distribuição Regional</h3>
        <canvas id="regiaoDonutChart" class="chart-canvas"></canvas>
      </div>
    </div>

    <!-- Top 5 -->
    <div class="crimes-list">
      <h3 class="crimes-title">Top 5 — Ameaças Identificadas</h3>
      <div class="crime-item">
        <div class="crime-name">Maria da Penha — Descumprimento de Medida (Art. 24-A)</div>
        <div class="crime-count">252</div>
      </div>
      <div class="crime-item">
        <div class="crime-name">Lesão Corporal — Violência Doméstica (Art. 129, § 9º)</div>
        <div class="crime-count">80</div>
      </div>
      <div class="crime-item">
        <div class="crime-name">Maria da Penha sem Medida Protetiva (Art. 10)</div>
        <div class="crime-count">68</div>
      </div>
      <div class="crime-item">
        <div class="crime-name">AMEACA CONTRA MULHER - CONDICAO SEXO FEMININO E VIOLENCIA DOMESTICA E FAMILIAR</div>
        <div class="crime-count">42</div>
      </div>
      <div class="crime-item">
        <div class="crime-name">LESÃO CORPORAL CONTRA MULHER - CONDICAO SEXO FEMININO E VIOLENCIA DOMESTICA E FAMILIAR - CRIMES CONTRA A PESSOA - ART. 129 §13</div>
        <div class="crime-count">38</div>
      </div>
    </div>

    <div class="footer">*** Sistema ativo — dados processados em 25/11/2025 ***</div>
  </div>

  <!-- ==== JS ORIGINAL (gráficos/contadores) preservado ==== -->
  <script>
    // animação dos KPI
    function animateNumbers() {
      document.querySelectorAll('.stat-card').forEach(counter => {
        const target = +counter.querySelector('.stat-number').getAttribute('data-target'); let cur = 0;
        const inc = Math.max(1, Math.ceil(target / 100));
        const tick = () => { cur += inc; if (cur >= target){ counter.querySelector('.stat-number').textContent = target; } else { counter.querySelector('.stat-number').textContent = cur; requestAnimationFrame(tick); } };
        requestAnimationFrame(tick);
      });
    }

    // Chart defaults
    Chart.defaults.font.family = "'Inter', system-ui, Arial";
    Chart.defaults.font.size = 13;
    Chart.defaults.color = '#cfe6ff';

    const dadosGraficos = {
      porRegiao: { labels:['CENTRO','LESTE','OESTE','NORTE','SUL','DISTRITOS','SEM DADOS'], values:[97,113,89,117,98,7,26] },
      porPeriodo:{ labels:['MANHÃ','TARDE','NOITE','MADRUGADA'], values:[124,178,206,86] },
      porDiaSemana:{ labels:['DOM','SEG','TER','QUA','QUI','SEX','SÁB'], values:[105,81,78,91,73,80,86] }
    };

    const palette = ['#00e6ff','#2f7bff','#7c4dff','#00b3ff','#66e0ff','#9db3ff','#b589ff'];

    // Barra — Região
    new Chart(document.getElementById('regiaoChart').getContext('2d'),{
      type:'bar',
      data:{ labels:dadosGraficos.porRegiao.labels, datasets:[{ label:'Ocorrências', data:dadosGraficos.porRegiao.values,
        backgroundColor: palette.map(c=>c+'66'), borderColor: palette, borderWidth:2, borderRadius:8, borderSkipped:false }]},
      options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{
        y:{ beginAtZero:true, grid:{color:'rgba(200,220,255,.15)'} },
        x:{ grid:{display:false} } } }
    });

    // Radar — Período
    new Chart(document.getElementById('periodoChart').getContext('2d'),{
      type:'radar',
      data:{ labels:dadosGraficos.porPeriodo.labels, datasets:[{ label:'Atividade', data:dadosGraficos.porPeriodo.values,
        backgroundColor:'rgba(0,230,255,.15)', borderColor:'#00e6ff', borderWidth:3, pointBackgroundColor:'#2f7bff', pointRadius:5 }]},
      options:{ responsive:true, maintainAspectRatio:false, scales:{ r:{ beginAtZero:true, grid:{color:'rgba(200,220,255,.15)'},
        pointLabels:{ color:'#cfe6ff' }, ticks:{ backdropColor:'transparent' } } } }
    });

    // Linha — Dia da semana
    new Chart(document.getElementById('diaSemanaChart').getContext('2d'),{
      type:'line',
      data:{ labels:dadosGraficos.porDiaSemana.labels, datasets:[{ label:'Padrão semanal', data:dadosGraficos.porDiaSemana.values,
        fill:true, tension:.35, borderColor:'#7c4dff', backgroundColor:'rgba(124,77,255,.12)', pointBackgroundColor:'#00e6ff', pointBorderColor:'#fff', pointBorderWidth:2, pointRadius:5 }]},
      options:{ responsive:true, maintainAspectRatio:false, scales:{ y:{ beginAtZero:true, grid:{color:'rgba(200,220,255,.15)'} }, x:{ grid:{display:false} } } }
    });

    // Donut — Distribuição
    new Chart(document.getElementById('regiaoDonutChart').getContext('2d'),{
      type:'doughnut',
      data:{ labels:dadosGraficos.porRegiao.labels, datasets:[{ data:dadosGraficos.porRegiao.values,
        backgroundColor: palette.map(c=>c+'99'), borderColor: palette, borderWidth:2 }]},
      options:{ responsive:true, maintainAspectRatio:false, cutout:'58%', plugins:{ legend:{ position:'right' } } }
    });

    // start
    animateNumbers();
  </script>
</body>
</html>
